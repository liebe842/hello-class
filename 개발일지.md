# 학급 관리 시스템 개발일지

## 2025-10-14

### 1. 학생 대시보드 UI 전면 개편
레퍼런스 디자인을 참고하여 학생 대시보드를 현대적이고 직관적인 인터페이스로 개선

#### 주요 변경사항

**1. 사이드바 내비게이션 추가** (`components/StudentSidebar.tsx`)
- 보라색 그라데이션 배경의 고정 사이드바
- 6개 핵심 메뉴 구성:
  - 🏠 대시보드
  - 🎯 퀴즈
  - 📝 과제
  - 📊 통계
  - 🏆 리더보드
  - 🏅 배지
- 모바일 반응형 디자인 (햄버거 메뉴)
- 하단에 학생 프로필 표시

**2. 대시보드 레이아웃 재구성**
- 배경: 보라-핑크 그라데이션 → 밝은 회색 (`bg-gray-50`)
- 상단 헤더: 제거 → "Hello, [이름] 👋" 인사말로 대체
- 포인트 표시: 우측 상단으로 이동, 독립적인 카드 형태
- 메인 콘텐츠: 사이드바 옆 (`flex-1 lg:ml-64`)

**3. 오늘의 정보 섹션 신규 추가**
실시간 데이터를 대시보드에서 바로 확인 가능하도록 개선

- **오늘 수업 카드** (`/student/timetable`)
  - 오늘 요일의 시간표 표시 (최대 3개 + 더보기)
  - Firestore `timetable` 컬렉션에서 실시간 조회
  - 클릭 시 시간표 페이지로 이동

- **다가오는 일정 카드** (`/student/school-schedule`)
  - 오늘부터 7일 이내의 학사일정 표시 (최대 3개)
  - 진행 중인 일정 포함
  - 클릭 시 학사일정 페이지로 이동

- **미제출 과제 카드** (`/student/assignments`)
  - 제출하지 않은 과제 목록 표시 (마감일 순)
  - 과제명 + 마감일 표시
  - 클릭 시 과제 페이지로 이동

- **빠른 메뉴 카드**
  - 급식, 칭찬, 목표 바로가기
  - 3x1 그리드 레이아웃

**4. 메뉴 카드 스타일 변경**
- 기존: 진한 그라데이션 배경 + 흰색 텍스트
- 변경: 파스텔 배경 + 테두리 + 어두운 텍스트
- 예시: `bg-purple-50 border-2 border-purple-200`
- hover 효과 강화

#### 기술적 구현

**데이터 Fetching 로직** (`app/student/dashboard/page.tsx`)
```typescript
// 여러 데이터를 한 번에 불러오기
const fetchAllData = async () => {
  // 1. 출석 데이터
  // 2. 학사일정 (오늘 + 7일)
  // 3. 시간표 (오늘 요일)
  // 4. 과제 (미제출 + 마감일 순)
};
```

**상태 관리**
```typescript
const [todaySchedule, setTodaySchedule] = useState<any[]>([]);
const [todayMeal, setTodayMeal] = useState<any>(null);
const [todayClasses, setTodayClasses] = useState<string[]>([]);
const [assignments, setAssignments] = useState<any[]>([]);
```

**요일 계산**
```typescript
const dayOfWeek = ['일', '월', '화', '수', '목', '금', '토'][new Date().getDay()];
// 시간표 키: "월-1", "화-2" 형식으로 조회
```

### 2. 관리자 사이드바 링크 수정
404 에러가 발생하던 메뉴 링크들을 실제 존재하는 페이지로 수정

#### 수정된 링크
| 메뉴명 | 이전 경로 | 수정된 경로 |
|--------|----------|------------|
| 퀴즈 & 목표 | `/admin/quiz-goals` | `/admin/quiz-topics` |
| 포인트 & 상점 | `/admin/points-shop` | `/admin/points/overview` |
| 칭찬 관리 | `/admin/praises` | `/admin/praise-list` |
| 설정 | `/admin/settings` | `/admin/class-config` |

### 3. 과제 제출 Ctrl+V 붙여넣기 개선
모달이 열리면 자동으로 전역 붙여넣기 이벤트를 감지하도록 개선

**구현 방법** (`app/student/assignments/page.tsx`)
```typescript
useEffect(() => {
  if (!showSubmitModal) return;

  const handleGlobalPaste = (e: ClipboardEvent) => {
    const items = e.clipboardData?.items;
    // 이미지 감지 및 자동 업로드
  };

  document.addEventListener('paste', handleGlobalPaste);
  return () => {
    document.removeEventListener('paste', handleGlobalPaste);
  };
}, [showSubmitModal]);
```

**개선 효과**
- 모달 열리자마자 Ctrl+V 가능
- 특정 요소 클릭 불필요
- 화면 캡처 후 바로 붙여넣기 가능

### 4. 디자인 통일성 분석 및 절충안 적용

#### 설계 결정
- **관리자**: 심플한 흰색 배경 + 블루 통일
- **학생**: 밝은 회색 배경 + 파스텔 다색상
- **공통**: 레이아웃 구조, 카드 스타일, 타이포그래피
- **차별화**: 색상, 이모지 사용, 분위기

#### 통일성 점수: 85/100
- ✅ 배경: 유사 (흰색 vs 밝은 회색)
- ✅ 카드: 동일한 shadow, border-radius
- ✅ 레이아웃: 사이드바 + 메인 구조 통일
- ⚠️ 색상: 관리자 블루 vs 학생 다색상 (의도된 차이)

### 5. 파일 변경 목록
- 📝 `components/StudentSidebar.tsx` (신규 생성)
- 📝 `app/student/dashboard/page.tsx` (전면 수정)
- 📝 `components/AdminSidebar.tsx` (링크 수정)
- 📝 `app/student/assignments/page.tsx` (붙여넣기 개선)

### 6. 다음 작업 예정
- 급식 정보 API 연동 테스트
- 학생 사이드바 활성화 상태 개선
- 대시보드 로딩 상태 최적화

---

## 2025-01-14

### 1. 수업 관리 페이지 학사일정 데이터 로딩 수정
- **문제**: 수업 관리 페이지의 학사일정 탭에서 데이터가 빈 배열로 표시됨
- **원인**: Firestore 컬렉션 이름 불일치 (`schoolSchedule` vs `schoolSchedules`)
- **해결**:
  - `app/admin/classes/page.tsx`에서 컬렉션 이름을 `schoolSchedules`로 수정
  - 9개의 학사일정 데이터가 정상적으로 표시됨

### 2. 관리자 페이지 UI 디자인 통일화
전체 관리자 페이지의 디자인을 통일된 스타일로 변경하여 일관성 있는 사용자 경험 제공

#### 통일된 디자인 패턴
1. **레이아웃 구조**:
   - 기존: `<header>` + `<main className="container mx-auto">` 구조
   - 변경: `<div className="p-8">` 단일 구조로 단순화
   - 사이드바(`AdminSidebar`)는 `app/admin/layout.tsx`에서 전역 관리

2. **헤더 영역**:
   - 기존: 컬러풀한 상단 헤더 (파란색, 보라색, 초록색 등)
   - 변경: 페이지 내 텍스트 헤더로 통일
   ```tsx
   <div className="mb-8">
     <h1 className="text-3xl font-bold text-gray-800 mb-2">[페이지 제목]</h1>
     <p className="text-gray-600">[페이지 설명]</p>
   </div>
   ```

3. **컬러 스킴**:
   - 기존: 각 페이지마다 다른 색상 (파란색, 보라색, 초록색, 빨간색 등)
   - 변경: 전체 블루 컬러로 통일 (`bg-blue-500`, `hover:bg-blue-600`)
   - 예외: 위험한 작업(삭제)은 빨간색 유지

4. **버튼 스타일**:
   - 기존: `px-6 py-3`, 이모지 포함 ("+ 등록", "📥 다운로드")
   - 변경: `px-4 py-2`, 이모지 제거 ("등록", "다운로드")

5. **타이포그래피**:
   - h1: `text-3xl font-bold text-gray-800`
   - h2: `text-xl font-bold text-gray-800` (기존 `text-2xl`에서 축소)
   - 설명 텍스트: `text-gray-600`

#### 수정된 페이지 목록
1. **학생 관리** (`app/admin/students/page.tsx`)
   - 파란색 헤더 제거
   - 버튼 이모지 제거
   - 블루 컬러로 통일

2. **과제 관리** (`app/admin/assignments/page.tsx`)
   - 보라색 헤더 제거
   - 보라색 accent를 블루로 변경
   - 제출 방식 선택 버튼 블루로 통일

3. **퀴즈 & 목표** (`app/admin/quiz-topics/page.tsx`)
   - 보라색 테마를 블루로 변경
   - 주제 배지, 체크박스 등 모든 accent 블루로 통일

4. **시간표 편집** (`app/admin/timetable/page.tsx`)
   - 파란색 헤더 제거
   - 초록색 저장 버튼을 블루로 변경
   - 이모지 제거 (📋, 📄, 📚)

5. **학사일정 관리** (`app/admin/school-schedule/page.tsx`)
   - 파란색 헤더 제거
   - 초록색, 보라색 버튼을 블루로 통일
   - CSV 업로드 관련 UI accent 블루로 변경

6. **학급 정보 설정** (`app/admin/class-config/page.tsx`)
   - 새로 생성된 페이지
   - 처음부터 통일된 디자인 패턴 적용

7. **상점 아이템 관리** (`app/admin/shop/page.tsx`)
   - 보라색 테마를 블루로 변경
   - 카테고리 배지 블루로 통일

8. **포인트 지급/차감** (`app/admin/points/grant/page.tsx`)
   - 버튼 이모지 제거 (➕, ➖)
   - 블루 컬러로 통일

9. **포인트 현황** (`app/admin/points/overview/page.tsx`)
   - 초록색, 보라색 통계 카드를 블루로 변경
   - 초기화 버튼 이모지 제거 (🔄)

10. **쿠폰 관리** (`app/admin/coupons/page.tsx`)
    - 필터 버튼 색상 통일 (회색, 노란색, 초록색, 빨간색 → 모두 블루)
    - 승인 버튼 블루로 변경

#### 기술적 변경사항
- **컴포넌트 구조 단순화**: 불필요한 wrapper 제거로 렌더링 성능 개선
- **색상 일관성**: 모든 인터랙티브 요소에 블루 계열 사용 (`blue-50`, `blue-100`, `blue-500`, `blue-600`, `blue-700`)
- **접근성 향상**: focus ring 색상 통일 (`focus:ring-blue-500`)
- **유지보수성**: 통일된 패턴으로 향후 수정 및 확장 용이

### 3. 다음 작업 예정
- 게임 관리 페이지 디자인 통일
- 설정 페이지 디자인 통일
- 학생용 페이지 디자인 검토 및 개선
